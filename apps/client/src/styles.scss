@use './styles/functions' as fn;
@use './styles/variables' as v;
@use './styles/mixins' as m;

/* Dark theme tokens (ChatGPT-like) */
:root {
  --bg: #0b0f14;
  --surface: #0f1620;
  --surface-2: #111b27;
  --text: rgba(255, 255, 255, 0.92);
  --text-muted: rgba(255, 255, 255, 0.64);
  --border: rgba(255, 255, 255, 0.1);

  --accent: #{v.$color-brand-red}; /* keep your brand red */
  --focus: rgba(11, 95, 255, 0.85);
}

/* Reset */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

html {
  font-size: 16px;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

body {
  margin: 0;
  min-height: 100dvh;

  font-family: v.$font-family-base;
  font-weight: v.$font-weight-regular;
  font-size: fn.rem(16px);
  line-height: fn.lh(16px, 24px);

  color: var(--text);

  /* ChatGPT dark-like background */
  background-color: var(--bg);
  background-image: radial-gradient(
      circle at 20% 10%,
      rgba(237, 29, 36, 0.1) 0%,
      rgba(237, 29, 36, 0) 40%
    ),
    radial-gradient(
      circle at 80% 0%,
      rgba(11, 95, 255, 0.1) 0%,
      rgba(11, 95, 255, 0) 40%
    ),
    radial-gradient(
      circle at 70% 85%,
      rgba(255, 255, 255, 0.04) 0%,
      rgba(255, 255, 255, 0) 45%
    );

  background-attachment: fixed;

  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

img,
svg,
video,
canvas {
  display: block;
  max-width: 100%;
}

button,
input,
textarea,
select {
  font: inherit;
  color: inherit;
}

button {
  border: 0;
  background: transparent;
  padding: 0;
}

a {
  color: inherit;
  text-decoration: none;
}

/* A11y focus */
:focus-visible {
  outline: fn.rem(2px) solid var(--focus);
  outline-offset: fn.rem(2px);
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0 0 v.$space-3;
  font-weight: v.$font-weight-semibold;
  color: var(--text);
}

h1 {
  font-size: fn.fluid(28px, 40px);
  line-height: fn.lh(40px, 48px);
}

h2 {
  font-size: fn.fluid(22px, 30px);
  line-height: fn.lh(30px, 38px);
}

h3 {
  font-size: fn.fluid(18px, 22px);
  line-height: fn.lh(22px, 30px);
}

p {
  margin: 0 0 v.$space-3;
}

small {
  font-size: fn.rem(12px);
  line-height: fn.lh(12px, 16px);
  color: var(--text-muted);
}

/* Selection */
::selection {
  background: rgba(237, 29, 36, 0.22);
}

/* Helpers */
.container {
  @include m.container;
}

.surface {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: v.$radius-md;
  box-shadow: v.$shadow-md;
}

.sr-only {
  @include m.sr-only;
}

/* Buttons */
.poalim-btn {
  @include m.button-base;

  &--primary {
    background: var(--accent);
    color: rgba(255, 255, 255, 0.95);

    &:hover:not(:disabled) {
      filter: brightness(0.95);
    }
  }

  &--ghost {
    background: transparent;
    border-color: var(--border);
    color: var(--text);

    &:hover:not(:disabled) {
      background: rgba(255, 255, 255, 0.06);
    }
  }
}

/* Inputs */
.poalim-input {
  width: 100%;
  border-radius: v.$radius-sm;
  border: 1px solid var(--border);
  background: var(--surface-2);
  padding: v.$space-2 v.$space-3;

  font-size: fn.rem(14px);
  line-height: fn.lh(14px, 20px);

  transition: border-color v.$transition-base, box-shadow v.$transition-base;

  &:focus-visible {
    border-color: rgba(11, 95, 255, 0.85);
    box-shadow: 0 0 0 fn.rem(3px) rgba(11, 95, 255, 0.22);
    outline: none;
  }

  &::placeholder {
    color: rgba(255, 255, 255, 0.45);
  }

  &:disabled {
    opacity: 0.7;
    cursor: not-allowed;
  }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 1ms !important;
    scroll-behavior: auto !important;
  }
}
